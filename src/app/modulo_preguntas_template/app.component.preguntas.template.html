<ng-container *ngFor="let cuestionario of cuestionarios; let i = index;">
  <div *ngIf="cuestionario.id==indice+1" class="custionario-container" >
  <div *ngIf="cuestionario.idTipocuestionario.id==1" >
       <div class="row" >
        <div class="col-12 texto-pregunta">
        {{cuestionario.idPregunta.pregunta.trim() || '&nbsp;'}} 
        </div>
      </div>
      <div class="row justify-content-center">
        <ng-container *ngFor="let s of cuestionario.idrespuestas|respPipe ; let j = index" class="btn-preguntas">
        <div class="col-md-2 col-12 contenedor-botton">
          <div class="row justify-content-center">
            <div class="col-md-12 col-8" > 
               <button
                 type="button" 
                 class="btn btn-primary btn-lg sharp btn-selected btn-outline btn-block" 
                 (click)="rellenarRespuestas(i, s.id, j, s.respuesta)"
                 (click)="toResp()"
                 [ngClass]="{'btn-selected': apiservice.btnSlected[i][j]}"
               >
                    {{capitalizeFirstLetter(s.respuesta.toLowerCase())}}  
               </button>
            </div> 
          </div>
        </div>
        </ng-container>
      </div>
    </div>
    <div *ngIf="cuestionario.idTipocuestionario.id==2">
      <div class="row" >
        <div class="col-12 texto-pregunta" style="text-align:left">
          {{cuestionario.idPregunta.pregunta.trim() || '&nbsp;'}} 
        </div>
        <div class="col-12" style="text-align:left"> 
          <div class="div-exterior-select btn " style="text-align:left">
          <select style=
            "
            padding-left:0px;
            padding-right:0px;
            color:#234369 !important;
            font-family: 'Questrial', sans-serif !important;
            font-size: 135%  !important;
            " 
            class="selectPregunta" 
            name="indice" 
            (change)="toResp()" 
            class="btn" 
            [(ngModel)]="apiservice.respuestas[indice].resp"
            (ngModelChange)="onChange($event, indice, cuestionario.idrespuestas, false)"
          >
            <option class="opcion-select"  [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
            <option class="opcion-select"  [value]="s.id" *ngFor="let s of cuestionario.idrespuestas|respPipe; let i = index" [value]="s.respuesta">
            {{s.respuesta}}
            </option>
          </select>
          </div>
        </div>
    
       <div style="text-align:left" class="col-12" *ngFor="let d of cuestionario.idSubrespuestas|respPipe2:apiservice.respuestas[indice].resp;let j = index">
          <div class="div-exterior-select btn">
          <select style=
          "
          padding-left:0px;
          padding-right:0px;
          color:#234369 !important;
          font-family: 'Questrial', sans-serif !important;
          font-size: 135%  !important;
          " 
            class="selectPregunta btn" 
            name="indice"
            [(ngModel)]="apiservice.respuestas[indice].subresp[j].id" 
            (click)="toResp()" 
            (ngModelChange)="onChange($event, i, d, true, j)"
            >
            <option class="opcion-select"  [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
            <option [value]="d.idsubrespuesta1.id">{{d.idsubrespuesta1.respuesta}}</option>
            <option [value]="d.idsubrespuesta2.id">{{d.idsubrespuesta2.respuesta}}</option>        
          </select>     
          </div>
          <div *ngIf="(d.id1.subrespOrigen.id == apiservice.respuestas[indice].subresp[j].id) &&  d.id1.subrespOrigen.id != 1">
            <div class="div-exterior-select btn">
              <select style=
              "
              padding-left:0px;
              padding-right:0px;
              color:#234369 !important;
              font-family: 'Questrial', sans-serif !important;
              font-size: 135%  !important;
              " 
                class="selectPregunta btn" 
                name="indice" 
                [(ngModel)]="apiservice.respuestas[indice].subresp[j+1].id" 
                (click)="toResp()"
                (ngModelChange)="onChange($event, i, d.id1, true, j+1)"
                >
              <option *ngIf="(d.id1.subrespOrigen.id == apiservice.respuestas[indice].subresp[j].id) &&  d.id1.subrespOrigen.id != 1" class="opcion-select"  [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
              <option [value]="d.id1.idsubrespuesta1.id">{{d.id1.idsubrespuesta1.respuesta}}</option> 
              <option [value]="d.id1.idsubrespuesta2.id">{{d.id1.idsubrespuesta2.respuesta}}</option>       
              </select>     
            </div>
          </div>
    
          <div *ngIf="d.id2.subrespOrigen.id == apiservice.respuestas[indice].subresp[j].id &&  d.id2.subrespOrigen.id != 1">
            <div class="div-exterior-select btn">
              <select style=
              "
              padding-left:0px;
              padding-right:0px;
              color:#234369 !important;
              font-family: 'Questrial', sans-serif !important;
              font-size: 135%  !important;
              " 
                class="selectPregunta btn" 
                name="indice" 
                 [(ngModel)]="apiservice.respuestas[indice].subresp[j+1].id" 
                (click)="toResp()" 
                (ngModelChange)="onChange($event, i, d.id2, true, j+1)">
                <option class="opcion-select"  *ngIf="d.id2.subrespOrigen.id == apiservice.respuestas[indice].subresp[j].id &&  d.id2.subrespOrigen.id != 1" [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
                <option [value]="d.id2.idsubrespuesta1.id">{{d.id2.idsubrespuesta1.respuesta}}</option> 
                <option [value]="d.id2.idsubrespuesta2.id">{{d.id2.idsubrespuesta2.respuesta}}</option>            
              </select>     
            </div>
          </div>    

          <div *ngIf="d.id1.id1.subrespOrigen.id == apiservice.respuestas[indice].subresp[j+1].id && d.id1.id1.subrespOrigen.id != 1">
             <div class="div-exterior-select btn">
              <select style=
              "
              padding-left:0px;
              padding-right:0px;
              color:#234369 !important;
              font-family: 'Questrial', sans-serif !important;
              font-size: 135%  !important;
              " 
                class="selectPregunta btn"
                name="indice" 
                [(ngModel)]="apiservice.respuestas[indice].subresp[j+2].id"
                (click)="toResp()" 
                (ngModelChange)="onChange($event, i, d.id1.id1, true, j+2)" 
                >
              <option class="opcion-select"  *ngIf="d.id1.id1.subrespOrigen.id == apiservice.respuestas[indice].subresp[j+1].id && d.id1.id1.subrespOrigen.id != 1" [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
              <option [value]="d.id1.id1.idsubrespuesta1.id">{{d.id1.id1.idsubrespuesta1.respuesta}}</option> 
              <option [value]="d.id1.id1.idsubrespuesta2.id">{{d.id1.id1.idsubrespuesta2.respuesta}}</option>               
              </select>     
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
  </div>
</ng-container>

<!--
   
    <div *ngFor="let d of cuestionario.idSubrespuestas|respPipe2:apiservice.respuestas[indice].resp;let j = index">
      <select name="indice" class="btn-group" [(ngModel)]="apiservice.respuestas[indice].subresp[j]" (change)=toSet(indice)>
            <option class="opcion-select"  [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
        <option [value]="d.idsubrespuesta1.id">{{d.idsubrespuesta1.respuesta}}</option> 
        <option [value]="d.idsubrespuesta2.id">{{d.idsubrespuesta2.respuesta}}</option>        
      </select>  

      <div *ngIf="d.id1.subrespOrigen.id == apiservice.respuestas[indice].subresp[j]">
        <select name="indice2" class="btn-group" [(ngModel)]="apiservice.respuestas[indice].subresp[j+1]" (change)=toSet(indice,(j+1))>
            <option class="opcion-select"  [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
          <option [value]="d.id1.idsubrespuesta1.id">{{d.id1.idsubrespuesta1.respuesta}}</option> 
          <option [value]="d.id1.idsubrespuesta2.id">{{d.id1.idsubrespuesta2.respuesta}}</option>        
        </select> 
      </div>

      <div *ngIf="d.id2.subrespOrigen.id == apiservice.respuestas[indice].subresp[j]">
          <select name="indice" class="btn-group" [(ngModel)]="apiservice.respuestas[indice].subresp[j+1]" (change)=toSet(indice,(j+1
            <option class="opcion-select"  [value]="1" selected disabled>Selecciona una opci&oacute;n</option>
            <option [value]="d.id2.idsubrespuesta1.id">{{d.id2.idsubrespuesta1.respuesta}}</option> 
            <option [value]="d.id2.idsubrespuesta2.id">{{d.id2.idsubrespuesta2.respuesta}}</option>        
          </select> 
      </div>    

        <div *ngIf="d.id1.id1.subrespOrigen.id == apiservice.respuestas[indice].subresp[j+1]">
          <select name="indice2" class="btn-group" [(ngModel)]="apiservice.respuestas[indice].subresp[j+2]">
            <option [value]="d.id1.id1.idsubrespuesta1.id">{{d.id1.id1.idsubrespuesta1.respuesta}}</option> 
            <option [value]="d.id1.id1.idsubrespuesta2.id">{{d.id1.id1.idsubrespuesta2.respuesta}}</option>        
          </select> 
        </div>
        
        -->